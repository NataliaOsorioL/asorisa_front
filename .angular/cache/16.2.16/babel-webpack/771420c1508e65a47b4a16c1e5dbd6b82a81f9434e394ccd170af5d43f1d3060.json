{"ast":null,"code":"import _asyncToGenerator from \"/Users/sebas/Downloads/asorisa-angular-ecommerce-full/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { environment } from '..//enviroments/environment.prod';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let ProductService = /*#__PURE__*/(() => {\n  class ProductService {\n    constructor(http) {\n      this.http = http;\n      this.API_URL = environment.apiUrl;\n      this.S3_BUCKET = environment.S3_BUCKET;\n    }\n    getProductos() {\n      return this.http.get(`${this.API_URL}/productos`);\n    }\n    getCategorias() {\n      return this.http.get(`${this.API_URL}/categorias`);\n    }\n    deleteProducto(id) {\n      return this.http.delete(`${this.API_URL}/productos/${id}`);\n    }\n    updateProducto(id, producto, file) {\n      if (file) {\n        return this.subirImagen(file).then(url => {\n          producto.imagen = url;\n          return this.http.put(`${this.API_URL}/productos/${id}`, producto).toPromise();\n        });\n      } else {\n        return this.http.put(`${this.API_URL}/productos/${id}`, producto).toPromise();\n      }\n    }\n    createProducto(producto, file) {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        if (file) {\n          const url = yield _this.subirImagen(file);\n          producto.imagen = url;\n        }\n        return _this.http.post(`${_this.API_URL}/productos`, producto).toPromise();\n      })();\n    }\n    subirImagen(file) {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        const presign = yield _this2.http.get(`${_this2.API_URL}/s3/presigned-url?filename=${encodeURIComponent(file.name)}&filetype=${file.type}`).toPromise();\n        yield fetch(presign.url, {\n          method: 'PUT',\n          body: file,\n          headers: {\n            'Content-Type': file.type // ⚠️ debe coincidir con el ContentType del presigned\n          }\n        });\n\n        return `https://asorisa-productos-2025.s3.amazonaws.com/${presign.key}`;\n      })();\n    }\n    static {\n      this.ɵfac = function ProductService_Factory(t) {\n        return new (t || ProductService)(i0.ɵɵinject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: ProductService,\n        factory: ProductService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return ProductService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}