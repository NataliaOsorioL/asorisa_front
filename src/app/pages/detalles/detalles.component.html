<!-- Fondo oscuro -->
<div
  class="fixed inset-0 bg-black/70 flex items-center justify-center z-50"
  (click)="cerrar.emit()"
>
  <!-- Contenedor modal -->
  <div
    class="bg-white rounded-2xl shadow-lg overflow-hidden max-w-md w-full relative"
    (click)="$event.stopPropagation()"
  >
    <!-- Imagen -->
    <img
      [src]="producto.imagen"
      [alt]="producto.nombre"
      class="w-full h-64 object-cover"
    />

    <div class="p-6">
      <!-- Nombre -->
      <h2 class="text-2xl font-bold text-gray-800 mb-2">
        {{ producto.nombre }}
      </h2>

      <!-- DescripciÃ³n -->
      <p class="text-gray-600 mb-4">{{ producto.descripcion }}</p>

      <!-- Precio -->
      <p class="text-2xl font-semibold text-green-600 mb-2">
        $ {{ producto.valor | number }}
      </p>

      <!-- Stock disponible -->
      <p
        class="text-sm font-medium flex items-center gap-2 mb-4"
        [ngClass]="{
          'text-red-500': producto.stock === 0,
          'text-yellow-500': producto.stock > 0 && producto.stock <= 5,
          'text-gray-700': producto.stock > 5
        }"
      >
        <span
          class="w-3 h-3 rounded-full"
          [ngClass]="{
            'bg-red-500': producto.stock === 0,
            'bg-yellow-500': producto.stock > 0 && producto.stock <= 5,
            'bg-green-500': producto.stock > 5
          }"
        ></span>
        {{
          producto.stock === 0
            ? 'Sin stock disponible'
            : producto.stock <= 5
            ? 'Pocas unidades (' + producto.stock + ' disponibles)'
            : 'Stock: ' + producto.stock + ' unidades'
        }}
      </p>

      <!-- Selector de cantidad -->
      <div class="flex items-center gap-3 mb-4">
        <label for="cantidad" class="text-gray-700 font-medium">Unidades:</label>
        <input
          id="cantidad"
          type="number"
          [(ngModel)]="cantidad"
          min="1"
          [max]="producto.stock"
          class="border rounded-lg px-3 py-1 w-20 text-center text-black focus:ring-2 focus:ring-[var(--asorisa-green)] focus:outline-none"
        />
      </div>

      <!-- Botones -->
      <div class="flex justify-between">
        <button
          class="bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 px-6 rounded-lg"
          (click)="cerrar.emit()"
        >
          Cerrar
        </button>
        <button
          class="bg-green-600 hover:bg-green-700 text-white py-2 px-6 rounded-lg disabled:opacity-50"
          [disabled]="producto.stock === 0"
          (click)="agregarAlCarrito()"
        >
          Agregar al carrito
        </button>
      </div>
    </div>
  </div>
</div>
